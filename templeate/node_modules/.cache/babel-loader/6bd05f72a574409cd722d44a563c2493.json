{"ast":null,"code":"import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Cookie from \"universal-cookie\";\nconst DbUrl = \"https://isnft-prod.azurewebsites.net/api/users\";\nconst cookie = new Cookie();\n\nconst CrearUsario = (data, setErr, setForm, location) => {\n  let idowner = cookie.get(\"id_usr_tok\");\n  const heade = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${idowner}`\n  };\n  const state = {\n    datos: {\n      \"cityId\": Number(data.cities),\n      \"countyId\": Number(data.country),\n      \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n      \"direction\": data.direction,\n      \"finishAvailabilityDate\": `9-08-1999`,\n      \"latitude\": location.latitude,\n      \"longitude\": location.longitude,\n      \"startAvailabilityDate\": `9-08-1999`,\n      \"photos\": [data.url]\n    },\n    formphot: {\n      \"id\": id_photo,\n      \"url\": parse_text[2]\n    }\n  };\n  console.log(state.datos); // axios\n  //   .post(DbUrl, state.datos\n  //   , {\n  //     headers:heade\n  //}\n  //)\n  //.then(response => {\n  // console.log(response.data);\n  //})\n  //.catch(error => {\n  //  console.log(error);\n  //})\n  // let formdata = new FormData()\n  // formdata.append(\"file\", parse_text[2])\n  // axios({\n  // url: photoUrl,\n  //method: \"POST\",\n  //headers : heade,\n  //data: formdata,\n  //})\n  //.then((res) =>{\n  //console.log(res)\n  //})\n  //.catch((er) => console.log(er))\n\n  /*let state = {\n    datos: {\n            \"city\": {\n              \"id\": data.cityId,\n              \"name\": \"string\"\n            },\n            \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n            \"direction\": data.direction,\n            \"finishAvailabilityDate\": \"string\",\n            \"id\": 0,\n            \"latitude\": 0,\n            \"longitude\": 0,\n            \"ownerId\": ownerId[0],\n            \"photos\": [\n              {\n                \"id\": 0,\n                \"url\": data.url\n              }\n            ],\n            \"startAvailabilityDate\": \"string\"\n          }\n  };\n     //console.log(data.id);\n    const DbUrlPhotos =`https://isnft-prod.azurewebsites.net/api/houses/photo?id=${data.id}`\n    axios\n    .post(baseUrl, { email: this.state.form.email, password: this.state.form.password })\n        .then(response => {\n            var token = response.data;\n            cookies.set('id_usr_tok', token.accessToken, {path: \"/\"});\n            alert(`Bienvenido`);\n            window.location.href=\"./menu\";\n        })\n        .catch(error => {\n            console.log(error);\n        })\n    \n    /*    axios({\n        method:'POST',\n        url: DbUrlPhotos,\n        data : state.datos\n    }).then((resp) => {\n        console.log(resp.data)\n    })*/\n};\n\n_c = CrearUsario;\nexport default CrearUsario;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrearUsario\");","map":{"version":3,"sources":["/root/dev/Red-Apoyo_Internacional/templeate/src/pages/helpers/helpCrearUsario.js"],"names":["React","useEffect","useState","axios","Cookie","DbUrl","cookie","CrearUsario","data","setErr","setForm","location","idowner","get","heade","state","datos","Number","cities","country","name_pub","rooms","Bathrooms","price","direction","latitude","longitude","url","formphot","id_photo","parse_text","console","log"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,MAAMC,KAAK,GAAC,gDAAZ;AAEA,MAAMC,MAAM,GAAG,IAAIF,MAAJ,EAAf;;AAEA,MAAMG,WAAW,GAAG,CAACC,IAAD,EAAOC,MAAP,EAAeC,OAAf,EAAwBC,QAAxB,KAAqC;AAErD,MAAIC,OAAO,GAAGN,MAAM,CAACO,GAAP,CAAW,YAAX,CAAd;AACA,QAAMC,KAAK,GAAG;AACZ,oBAAgB,kBADJ;AAEZ,qBAAkB,UAASF,OAAQ;AAFvB,GAAd;AAIA,QAAMG,KAAK,GAAG;AACZC,IAAAA,KAAK,EAAE;AACH,gBAAUC,MAAM,CAACT,IAAI,CAACU,MAAN,CADb;AAEH,kBAAYD,MAAM,CAACT,IAAI,CAACW,OAAN,CAFf;AAGH,qBAAgB,GAAEX,IAAI,CAACY,QAAS,IAAGZ,IAAI,CAACa,KAAM,IAAGb,IAAI,CAACc,SAAU,IAAGd,IAAI,CAACe,KAAM,EAH3E;AAIH,mBAAaf,IAAI,CAACgB,SAJf;AAKH,gCAA2B,WALxB;AAMH,kBAAYb,QAAQ,CAACc,QANlB;AAOH,mBAAad,QAAQ,CAACe,SAPnB;AAQH,+BAA0B,WARvB;AASH,gBAAU,CAAClB,IAAI,CAACmB,GAAN;AATP,KADK;AAYVC,IAAAA,QAAQ,EAAE;AACR,YAAMC,QADE;AAER,aAAOC,UAAU,CAAC,CAAD;AAFT;AAZA,GAAd;AAkBFC,EAAAA,OAAO,CAACC,GAAR,CAAYjB,KAAK,CAACC,KAAlB,EAzBuD,CA4BtD;AACE;AACE;AACE;AACC;AACA;AACE;AACE;AACA;AACF;AACE;AACF;AAEP;AAEA;AACA;AACE;AACC;AACA;AACA;AACA;AACF;AACE;AACF;AACA;;AAEJ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEC,CAnGD;;KAAMT,W;AAoGN,eAAeA,WAAf","sourcesContent":["import React, { useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport Cookie from \"universal-cookie\"\n\nconst DbUrl=\"https://isnft-prod.azurewebsites.net/api/users\";\n\nconst cookie = new Cookie();\n\nconst CrearUsario = (data, setErr, setForm, location) => {\n\n    let idowner = cookie.get(\"id_usr_tok\");\n    const heade = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idowner}`\n    }\n    const state = {\n      datos: {\n          \"cityId\": Number(data.cities),\n          \"countyId\": Number(data.country),\n          \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n          \"direction\": data.direction,\n          \"finishAvailabilityDate\": `9-08-1999`,\n          \"latitude\": location.latitude,\n          \"longitude\": location.longitude,\n          \"startAvailabilityDate\": `9-08-1999`,\n          \"photos\": [data.url]\n        },\n        formphot: {\n          \"id\": id_photo,\n          \"url\": parse_text[2]\n        }\n    };\n  \n  console.log(state.datos)\n\n    \n   // axios\n     //   .post(DbUrl, state.datos\n       //   , {\n         //     headers:heade\n          //}\n          //)\n            //.then(response => {\n              // console.log(response.data);\n              //})\n            //.catch(error => {\n              //  console.log(error);\n            //})\n\n     // let formdata = new FormData()\n      \n     // formdata.append(\"file\", parse_text[2])\n     // axios({\n       // url: photoUrl,\n        //method: \"POST\",\n        //headers : heade,\n        //data: formdata,\n        //})\n      //.then((res) =>{\n        //console.log(res)\n      //})\n      //.catch((er) => console.log(er))\n\n  /*let state = {\n    datos: {\n            \"city\": {\n              \"id\": data.cityId,\n              \"name\": \"string\"\n            },\n            \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n            \"direction\": data.direction,\n            \"finishAvailabilityDate\": \"string\",\n            \"id\": 0,\n            \"latitude\": 0,\n            \"longitude\": 0,\n            \"ownerId\": ownerId[0],\n            \"photos\": [\n              {\n                \"id\": 0,\n                \"url\": data.url\n              }\n            ],\n            \"startAvailabilityDate\": \"string\"\n          }\n  };\n\n    //console.log(data.id);\n    const DbUrlPhotos =`https://isnft-prod.azurewebsites.net/api/houses/photo?id=${data.id}`\n    axios\n    .post(baseUrl, { email: this.state.form.email, password: this.state.form.password })\n        .then(response => {\n            var token = response.data;\n            cookies.set('id_usr_tok', token.accessToken, {path: \"/\"});\n            alert(`Bienvenido`);\n            window.location.href=\"./menu\";\n        })\n        .catch(error => {\n            console.log(error);\n        })\n    \n    /*    axios({\n        method:'POST',\n        url: DbUrlPhotos,\n        data : state.datos\n    }).then((resp) => {\n        console.log(resp.data)\n    })*/\n}\nexport default CrearUsario;"]},"metadata":{},"sourceType":"module"}