{"ast":null,"code":"import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Cookie from \"universal-cookie\";\nconst DbUrl = \"https://isnft-prod.azurewebsites.net/api/houses\";\nconst cookie = new Cookie();\n\nconst CreateHouse = (data, setErr, setForm, location) => {\n  let idowner = cookie.get(\"id_usr_tok\");\n  const id_photo = Date.now();\n  const photoUrl = `${DbUrl}/photos?id=${id_photo}`;\n  const parse_text = data.url.split(\"\\\\\");\n  const heade_photos = {\n    'Content-Type': 'multipart/form-data',\n    'Authorization': `Bearer ${idowner}`,\n    'type': \"image/png\"\n  };\n  const heade = {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${idowner}`\n  };\n  const state = {\n    datos: {\n      \"cityId\": Number(data.cities),\n      \"countyId\": Number(data.country),\n      \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n      \"direction\": data.direction,\n      \"finishAvailabilityDate\": `9-08-1999`,\n      \"latitude\": location.latitude,\n      \"longitude\": location.longitude,\n      \"startAvailabilityDate\": `9-08-1999`,\n      \"photos\": [data.url]\n    },\n    formphot: {\n      \"id\": id_photo,\n      \"url\": parse_text[2]\n    }\n  };\n  console.log(state.datos); // axios\n  //   .post(DbUrl, state.datos\n  //   , {\n  //     headers:heade\n  //}\n  //)\n  //.then(response => {\n  // console.log(response.data);\n  //})\n  //.catch(error => {\n  //  console.log(error);\n  //})\n\n  let formdata = new FormData();\n  formdata.append(\"file\", parse_text[2]);\n  axios({\n    url: photoUrl,\n    method: \"POST\",\n    headers: heade,\n    data: formdata\n  }).then(res => {\n    console.log(res);\n  }).catch(er => console.log(er));\n  /*let state = {\n    datos: {\n            \"city\": {\n              \"id\": data.cityId,\n              \"name\": \"string\"\n            },\n            \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n            \"direction\": data.direction,\n            \"finishAvailabilityDate\": \"string\",\n            \"id\": 0,\n            \"latitude\": 0,\n            \"longitude\": 0,\n            \"ownerId\": ownerId[0],\n            \"photos\": [\n              {\n                \"id\": 0,\n                \"url\": data.url\n              }\n            ],\n            \"startAvailabilityDate\": \"string\"\n          }\n  };\n     //console.log(data.id);\n    const DbUrlPhotos =`https://isnft-prod.azurewebsites.net/api/houses/photo?id=${data.id}`\n    axios\n    .post(baseUrl, { email: this.state.form.email, password: this.state.form.password })\n        .then(response => {\n            var token = response.data;\n            cookies.set('id_usr_tok', token.accessToken, {path: \"/\"});\n            alert(`Bienvenido`);\n            window.location.href=\"./menu\";\n        })\n        .catch(error => {\n            console.log(error);\n        })\n    \n    /*    axios({\n        method:'POST',\n        url: DbUrlPhotos,\n        data : state.datos\n    }).then((resp) => {\n        console.log(resp.data)\n    })*/\n};\n\n_c = CreateHouse;\nexport default CreateHouse;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateHouse\");","map":{"version":3,"sources":["/root/dev/Red-Apoyo_Internacional/templeate/src/pages/helpers/helpCreateHouse.js"],"names":["React","useEffect","useState","axios","Cookie","DbUrl","cookie","CreateHouse","data","setErr","setForm","location","idowner","get","id_photo","Date","now","photoUrl","parse_text","url","split","heade_photos","heade","state","datos","Number","cities","country","name_pub","rooms","Bathrooms","price","direction","latitude","longitude","formphot","console","log","formdata","FormData","append","method","headers","then","res","catch","er"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,MAAMC,KAAK,GAAC,iDAAZ;AAEA,MAAMC,MAAM,GAAG,IAAIF,MAAJ,EAAf;;AAEA,MAAMG,WAAW,GAAG,CAACC,IAAD,EAAOC,MAAP,EAAeC,OAAf,EAAwBC,QAAxB,KAAqC;AAErD,MAAIC,OAAO,GAAGN,MAAM,CAACO,GAAP,CAAW,YAAX,CAAd;AACA,QAAMC,QAAQ,GAAGC,IAAI,CAACC,GAAL,EAAjB;AACA,QAAMC,QAAQ,GAAE,GAAEZ,KAAM,cAAaS,QAAS,EAA9C;AACA,QAAMI,UAAU,GAAGV,IAAI,CAACW,GAAL,CAASC,KAAT,CAAe,IAAf,CAAnB;AAGA,QAAMC,YAAY,GAAG;AACnB,oBAAgB,qBADG;AAEnB,qBAAkB,UAAST,OAAQ,EAFhB;AAGnB,YAAQ;AAHW,GAArB;AAQA,QAAMU,KAAK,GAAG;AACZ,oBAAgB,kBADJ;AAEZ,qBAAkB,UAASV,OAAQ;AAFvB,GAAd;AAIA,QAAMW,KAAK,GAAG;AACZC,IAAAA,KAAK,EAAE;AACH,gBAAUC,MAAM,CAACjB,IAAI,CAACkB,MAAN,CADb;AAEH,kBAAYD,MAAM,CAACjB,IAAI,CAACmB,OAAN,CAFf;AAGH,qBAAgB,GAAEnB,IAAI,CAACoB,QAAS,IAAGpB,IAAI,CAACqB,KAAM,IAAGrB,IAAI,CAACsB,SAAU,IAAGtB,IAAI,CAACuB,KAAM,EAH3E;AAIH,mBAAavB,IAAI,CAACwB,SAJf;AAKH,gCAA2B,WALxB;AAMH,kBAAYrB,QAAQ,CAACsB,QANlB;AAOH,mBAAatB,QAAQ,CAACuB,SAPnB;AAQH,+BAA0B,WARvB;AASH,gBAAU,CAAC1B,IAAI,CAACW,GAAN;AATP,KADK;AAYVgB,IAAAA,QAAQ,EAAE;AACR,YAAMrB,QADE;AAER,aAAOI,UAAU,CAAC,CAAD;AAFT;AAZA,GAAd;AAkBFkB,EAAAA,OAAO,CAACC,GAAR,CAAYd,KAAK,CAACC,KAAlB,EAtCuD,CAyCtD;AACE;AACE;AACE;AACC;AACA;AACE;AACE;AACA;AACF;AACE;AACF;;AAEN,MAAIc,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AAEAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBtB,UAAU,CAAC,CAAD,CAAlC;AACAf,EAAAA,KAAK,CAAC;AACJgB,IAAAA,GAAG,EAAEF,QADD;AAEJwB,IAAAA,MAAM,EAAE,MAFJ;AAGJC,IAAAA,OAAO,EAAGpB,KAHN;AAIJd,IAAAA,IAAI,EAAE8B;AAJF,GAAD,CAAL,CAOCK,IAPD,CAOOC,GAAD,IAAQ;AACZR,IAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACD,GATD,EAUCC,KAVD,CAUQC,EAAD,IAAQV,OAAO,CAACC,GAAR,CAAYS,EAAZ,CAVf;AAYJ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEC,CAjHD;;KAAMvC,W;AAkHN,eAAeA,WAAf","sourcesContent":["import React, { useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport Cookie from \"universal-cookie\"\n\nconst DbUrl=\"https://isnft-prod.azurewebsites.net/api/houses\";\n\nconst cookie = new Cookie();\n\nconst CreateHouse = (data, setErr, setForm, location) => {\n\n    let idowner = cookie.get(\"id_usr_tok\");\n    const id_photo = Date.now();\n    const photoUrl=`${DbUrl}/photos?id=${id_photo}`;\n    const parse_text = data.url.split(\"\\\\\");\n\n\n    const heade_photos = {\n      'Content-Type': 'multipart/form-data',\n      'Authorization': `Bearer ${idowner}`,\n      'type': \"image/png\"\n      \n    }\n\n\n    const heade = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idowner}`\n    }\n    const state = {\n      datos: {\n          \"cityId\": Number(data.cities),\n          \"countyId\": Number(data.country),\n          \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n          \"direction\": data.direction,\n          \"finishAvailabilityDate\": `9-08-1999`,\n          \"latitude\": location.latitude,\n          \"longitude\": location.longitude,\n          \"startAvailabilityDate\": `9-08-1999`,\n          \"photos\": [data.url]\n        },\n        formphot: {\n          \"id\": id_photo,\n          \"url\": parse_text[2]\n        }\n    };\n  \n  console.log(state.datos)\n\n    \n   // axios\n     //   .post(DbUrl, state.datos\n       //   , {\n         //     headers:heade\n          //}\n          //)\n            //.then(response => {\n              // console.log(response.data);\n              //})\n            //.catch(error => {\n              //  console.log(error);\n            //})\n\n      let formdata = new FormData()\n      \n      formdata.append(\"file\", parse_text[2])\n      axios({\n        url: photoUrl,\n        method: \"POST\",\n        headers : heade,\n        data: formdata,\n        \n      })\n      .then((res) =>{\n        console.log(res)\n      })\n      .catch((er) => console.log(er))\n\n  /*let state = {\n    datos: {\n            \"city\": {\n              \"id\": data.cityId,\n              \"name\": \"string\"\n            },\n            \"description\": `${data.name_pub}-${data.rooms}-${data.Bathrooms}-${data.price}`,\n            \"direction\": data.direction,\n            \"finishAvailabilityDate\": \"string\",\n            \"id\": 0,\n            \"latitude\": 0,\n            \"longitude\": 0,\n            \"ownerId\": ownerId[0],\n            \"photos\": [\n              {\n                \"id\": 0,\n                \"url\": data.url\n              }\n            ],\n            \"startAvailabilityDate\": \"string\"\n          }\n  };\n\n    //console.log(data.id);\n    const DbUrlPhotos =`https://isnft-prod.azurewebsites.net/api/houses/photo?id=${data.id}`\n    axios\n    .post(baseUrl, { email: this.state.form.email, password: this.state.form.password })\n        .then(response => {\n            var token = response.data;\n            cookies.set('id_usr_tok', token.accessToken, {path: \"/\"});\n            alert(`Bienvenido`);\n            window.location.href=\"./menu\";\n        })\n        .catch(error => {\n            console.log(error);\n        })\n    \n    /*    axios({\n        method:'POST',\n        url: DbUrlPhotos,\n        data : state.datos\n    }).then((resp) => {\n        console.log(resp.data)\n    })*/\n}\nexport default CreateHouse;"]},"metadata":{},"sourceType":"module"}